# ğŸ“š Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ™ Ğ“ĞĞ™Ğ”: Ğ”Ğ˜ĞĞ“Ğ ĞĞœĞœĞ« Ğ˜ ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ«

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 1: Ğ’Ğ˜Ğ—Ğ£ĞĞ›Ğ¬ĞĞ«Ğ• Ğ”Ğ˜ĞĞ“Ğ ĞĞœĞœĞ« ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ«

## ğŸ—ï¸ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TELEGRAM ĞĞ‘Ğ›ĞĞšĞ                               â”‚
â”‚  (Ğ¡ĞµÑ€Ğ²ĞµÑ€Ñ‹ Telegram, Ğ³Ğ´Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)            â”‚
â”‚                                                                     â”‚
â”‚  ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ 1 (Ğ˜Ğ²Ğ°Ğ½)                                             â”‚
â”‚  â”œâ”€ chat_id: 123456789                                             â”‚
â”‚  â”œâ”€ username: @ivan123                                             â”‚
â”‚  â””â”€ first_name: Ğ˜Ğ²Ğ°Ğ½                                               â”‚
â”‚                                                                     â”‚
â”‚  ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ 2 (ĞœĞ°Ñ€Ğ¸Ñ)                                            â”‚
â”‚  â”œâ”€ chat_id: 987654321                                             â”‚
â”‚  â””â”€ ...                                                            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†‘
                HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ JSON Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
                (Telegram Bot API)
                          â†“
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
        â–¼                 â–¼                 â–¼
     ĞŸĞ¾Ñ‚Ğ¾Ğº 1           ĞŸĞ¾Ñ‚Ğ¾Ğº 2         ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹
     (Ğ£Ñ‚Ñ€Ğ¾)            (ĞĞ°Ğ¿Ğ¾)          ĞŸĞ¾Ñ‚Ğ¾Ğº
     6:30              09:40, 10:50,   (Polling)
     Ğ Ğ°ÑÑÑ‹Ğ»ĞºĞ°          11:40 ...
                       ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ     â”œâ”€ /start
  while True:                          â”œâ”€ ĞĞ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº
  â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼:        while True:    â”œâ”€ Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
  â”‚  if 6:30 AM?       â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼    â””â”€ Callback Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
  â”‚  â””â”€ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼      time minute
  â”‚     Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ      â””â”€ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼    bot.polling()
  â”‚                       Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ    â”œâ”€ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  â””â”€ sleep(60)         â””â”€ sleep(30)     â”œâ”€ ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚
                                        â”œâ”€ Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
                                        â””â”€ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹
                          â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚        â”‚        â”‚
                 â–¼        â–¼        â–¼
              Ğ‘Ğ” Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
                 â”‚        â”‚        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      PostgreSQL Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…         â”‚
        â”‚                                     â”‚
        â”‚  Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:                           â”‚
        â”‚  â”œâ”€ Student                         â”‚
        â”‚  â”œâ”€ GlobalLesson                    â”‚
        â”‚  â”œâ”€ PersonalLesson                  â”‚
        â”‚  â””â”€ AdminSettings                   â”‚
        â”‚                                     â”‚
        â”‚  Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹:                           â”‚
        â”‚  â”œâ”€ PRIMARY KEY (id)                â”‚
        â”‚  â”œâ”€ UNIQUE (telegram_id)            â”‚
        â”‚  â””â”€ unique_together (...)           â”‚
        â”‚                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ² Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°

```
Python ĞºĞ¾Ğ´:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

lessons = GlobalLesson.objects.filter(
    grade=10,
    letter='Ğ',
    day=1
).order_by('number')

    â”‚
    â”‚ Django ORM Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¸Ğ»Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²:
    â–¼

SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SELECT *
FROM bot_globallesson
WHERE grade = 10
  AND letter = 'Ğ'
  AND day = 1
ORDER BY number ASC

    â”‚
    â”‚ PostgreSQL Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
    â–¼

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¸Ğ· Ğ‘Ğ”:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[
    GlobalLesson(id=1, grade=10, letter='Ğ', day=1, number=1, subject='ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°'),
    GlobalLesson(id=2, grade=10, letter='Ğ', day=1, number=2, subject='Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº'),
    GlobalLesson(id=3, grade=10, letter='Ğ', day=1, number=3, subject='ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹'),
    ...
]

    â”‚
    â”‚ ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµÑ‚ÑÑ Ğ² Python Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹
    â–¼

Python ĞºĞ¾Ğ´ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

for lesson in lessons:
    print(lesson.subject)  # ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°, Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº, ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°

```
Python ĞºĞ¾Ğ´:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

student, created = Student.objects.get_or_create(
    telegram_id=123456789,
    defaults={'name': 'Ğ˜Ğ²Ğ°Ğ½'}
)

    â”‚
    â”‚ Django ORM Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚:
    â”œâ”€ 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, ĞµÑÑ‚ÑŒ Ğ»Ğ¸ student Ñ telegram_id=123456789
    â”œâ”€ 2a. Ğ•ÑĞ»Ğ¸ Ğ”Ğ: Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ĞµĞ³Ğ¾, created=False
    â””â”€ 2b. Ğ•ÑĞ»Ğ¸ ĞĞ•Ğ¢: ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹, created=True

Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2a (ÑƒÑ‡ĞµĞ½Ğ¸Ğº ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SELECT *
FROM bot_student
WHERE telegram_id = 123456789 LIMIT 1

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
â””â”€ ĞĞ°Ğ¹Ğ´ĞµĞ½ ÑƒÑ‡ĞµĞ½Ğ¸Ğº Ñ ID 123456789
â””â”€ created = False
â””â”€ student = <Student: Ğ˜Ğ²Ğ°Ğ½ (10Ğ)>

Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2b (ÑƒÑ‡ĞµĞ½Ğ¸Ğº ĞĞ• ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SELECT *
FROM bot_student
WHERE telegram_id = 123456789 LIMIT 1

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾
    â”‚
    â”‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
    â–¼

INSERT INTO bot_student (telegram_id, name, use_global, created_at)
VALUES (123456789, 'Ğ˜Ğ²Ğ°Ğ½', true, NOW())

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
â””â”€ created = True
â””â”€ student = <Student: Ğ˜Ğ²Ğ°Ğ½>
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 2: ĞŸĞĞ”Ğ ĞĞ‘ĞĞ«Ğ• ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« ĞšĞĞ”Ğ

## ğŸ”§ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ `get_student_lessons()` Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼

```python
def get_student_lessons_with_logging(student, day_num):
    """
    ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° Ğ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.
    Ğ¡ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¼ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸.
    """
    
    print(f"[LOG] Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ {student.name} Ğ½Ğ° Ğ´ĞµĞ½ÑŒ {day_num}")
    
    # Ğ¨Ğ°Ğ³ 1: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
    print(f"[LOG] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹:")
    print(f"  - use_global: {student.use_global}")
    print(f"  - grade: {student.grade}")
    print(f"  - letter: {student.letter}")
    
    if student.use_global and student.grade and student.letter:
        print(f"[LOG] âœ… Ğ’ÑĞµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ²ĞµÑ€Ğ½Ñ‹, Ğ¸Ñ‰ĞµĞ¼ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ")
        
        # Ğ¨Ğ°Ğ³ 2: Ğ˜Ñ‰ĞµĞ¼ Ğ² GlobalLesson
        lessons = GlobalLesson.objects.filter(
            grade=student.grade,
            letter=student.letter,
            day=day_num
        ).order_by('number')
        
        print(f"[LOG] Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ² Ğ‘Ğ”: SELECT * FROM GlobalLesson WHERE grade={student.grade} AND letter='{student.letter}' AND day={day_num}")
        
        # Ğ¨Ğ°Ğ³ 3: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ½Ğ°ÑˆĞ»Ğ¸ Ğ»Ğ¸ ÑƒÑ€Ğ¾ĞºĞ¸
        if lessons.exists():
            print(f"[LOG] âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ {len(lessons)} Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑ€Ğ¾ĞºĞ¾Ğ²")
            for lesson in lessons:
                print(f"  - {lesson.number}. {lesson.subject}")
            return lessons, 'global'
        else:
            print(f"[LOG] âŒ Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾")
    else:
        print(f"[LOG] âŒ Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ ĞĞ• Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ñ‹ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾)")
    
    # Ğ¨Ğ°Ğ³ 4: Ğ•ÑĞ»Ğ¸ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚, Ğ¸Ñ‰ĞµĞ¼ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ
    print(f"[LOG] Ğ˜Ñ‰ĞµĞ¼ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ")
    
    lessons = PersonalLesson.objects.filter(
        student=student,
        day=day_num
    ).order_by('number')
    
    print(f"[LOG] Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ² Ğ‘Ğ”: SELECT * FROM PersonalLesson WHERE student_id={student.id} AND day={day_num}")
    
    if lessons.exists():
        print(f"[LOG] âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ {len(lessons)} Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… ÑƒÑ€Ğ¾ĞºĞ¾Ğ²")
        for lesson in lessons:
            print(f"  - {lesson.number}. {lesson.subject}")
    else:
        print(f"[LOG] âŒ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ (empty)")
    
    return lessons, 'personal'


# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

student = Student.objects.get(telegram_id=123456789)
lessons, lesson_type = get_student_lessons_with_logging(student, 1)

# Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# [LOG] Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ˜Ğ²Ğ°Ğ½ Ğ½Ğ° Ğ´ĞµĞ½ÑŒ 1
# [LOG] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹:
#   - use_global: True
#   - grade: 10
#   - letter: Ğ
# [LOG] âœ… Ğ’ÑĞµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ²ĞµÑ€Ğ½Ñ‹, Ğ¸Ñ‰ĞµĞ¼ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
# [LOG] Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ² Ğ‘Ğ”: SELECT * FROM GlobalLesson WHERE grade=10 AND letter='Ğ' AND day=1
# [LOG] âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ 5 Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑ€Ğ¾ĞºĞ¾Ğ²
#   - 1. ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°
#   - 2. Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº
#   - 3. ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹
#   - 4. Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
#   - 5. Ğ¤Ğ¸Ğ·Ğ¸ĞºĞ°
```

---

## ğŸ”§ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ

```python
# Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹: Ğ£Ñ‡ĞµĞ½Ğ¸Ğº Ğ˜Ğ²Ğ°Ğ½ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº

# Ğ¨ĞĞ“ 1: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ“‹ Ğ¢Ğ¸Ğ¿ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ"
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

@bot.message_handler(func=lambda message: message.text == "ğŸ“‹ Ğ¢Ğ¸Ğ¿ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ")
def change_schedule_type(message):
    user_id = message.chat.id  # user_id = 123456789
    student = Student.objects.get(telegram_id=user_id)
    
    markup = telebot.types.InlineKeyboardMarkup(row_width=1)
    markup.add(
        telebot.types.InlineKeyboardButton("ğŸŒ Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ", callback_data="use_global"),
        telebot.types.InlineKeyboardButton("ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ", callback_data="use_personal"),
        telebot.types.InlineKeyboardButton("ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ", callback_data="add_personal")
    )
    
    bot.send_message(
        message.chat.id,
        f"ğŸ“‹ *Ğ¢Ğ¸Ğ¿ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ*\n\n"
        f"ğŸŒ *Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ* - Ğ¾Ğ±Ñ‰ĞµĞµ Ğ´Ğ»Ñ Ğ²ÑĞµĞ³Ğ¾ ĞºĞ»Ğ°ÑÑĞ°\n"
        f"ğŸ‘¤ *Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ* - Ñ‚Ğ²Ğ¾Ñ‘ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ\n\n"
        f"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğ¹:",
        parse_mode='Markdown',
        reply_markup=markup
    )

# Ğ¨ĞĞ“ 2: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ"
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

@bot.callback_query_handler(func=lambda call: call.data == 'add_personal')
def add_personal_start(call):
    user_id = call.message.chat.id  # user_id = 123456789
    
    # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    temp_data[user_id] = {
        'action': 'add_personal',  # Ğ¤Ğ»Ğ°Ğ³, Ñ‡Ñ‚Ğ¾ Ğ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
        'step': 'day'               # Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³: Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ½Ñ
    }
    
    # Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ temp_data:
    # temp_data = {
    #     123456789: {
    #         'action': 'add_personal',
    #         'step': 'day'
    #     }
    # }
    
    bot.edit_message_text(
        "ğŸ“ *Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ*\n\n"
        "Ğ’Ğ²ĞµĞ´Ğ¸ Ğ´ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸ (Ñ†Ğ¸Ñ„Ñ€Ñƒ):\n\n"
        "1ï¸âƒ£ - ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº\n"
        "2ï¸âƒ£ - Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº\n"
        "3ï¸âƒ£ - Ğ¡Ñ€ĞµĞ´Ğ°\n"
        "4ï¸âƒ£ - Ğ§ĞµÑ‚Ğ²ĞµÑ€Ğ³\n"
        "5ï¸âƒ£ - ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ°",
        call.message.chat.id,
        call.message.message_id,
        parse_mode='Markdown'
    )

# Ğ¨ĞĞ“ 3: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚ "1" (Ğ´ĞµĞ½ÑŒ)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

@bot.message_handler(func=lambda message: message.chat.id in temp_data)
def handle_add_personal(message):
    user_id = message.chat.id
    data = temp_data[user_id]
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ (Ğ° Ğ½Ğµ Ğ´Ñ€ÑƒĞ³Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ)
    if data.get('action') != 'add_personal':
        return
    
    # Ğ¨ĞĞ“Ğ˜ Ğ”Ğ˜ĞĞ›ĞĞ“Ğ:
    # Step 1: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ´ĞµĞ½ÑŒ
    # Step 2: ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹
    
    if data['step'] == 'day':
        # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ´Ğ½Ñ
        # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        
        try:
            day = int(message.text.strip())  # ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµĞ¼ "1" â†’ 1
            
            # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
            if day < 1 or day > 5:
                bot.reply_to(
                    message, 
                    "âŒ Ğ”ĞµĞ½ÑŒ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 5",
                    parse_mode='Markdown'
                )
                return
            
            # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ´ĞµĞ½ÑŒ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
            data['day'] = day
            
            # temp_data[123456789] Ñ‚ĞµĞ¿ĞµÑ€ÑŒ:
            # {
            #     'action': 'add_personal',
            #     'step': 'day',
            #     'day': 1  â† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸
            # }
            
            # ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³
            data['step'] = 'subjects'
            
            days_names = {1: "ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº", 2: "Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº", 3: "Ğ¡Ñ€ĞµĞ´Ğ°", 4: "Ğ§ĞµÑ‚Ğ²ĞµÑ€Ğ³", 5: "ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ°"}
            
            bot.send_message(
                user_id,
                f"âœ… Ğ”ĞµĞ½ÑŒ: *{days_names[day]}*\n\n"
                f"ğŸ“ Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ğ²ĞµĞ´Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹\n\n"
                f"*ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸!*\n\n"
                f"*ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:*\n"
                f"Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº\n"
                f"ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°\n"
                f"Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°",
                parse_mode='Markdown',
                reply_markup=get_back_keyboard()
            )
        
        except ValueError:
            bot.reply_to(message, "âŒ ĞÑƒĞ¶Ğ½Ğ¾ Ğ²Ğ²ĞµÑÑ‚Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 5")
    
    elif data['step'] == 'subjects':
        # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²
        # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        
        # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚:
        # Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº
        # ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°
        # Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°
        
        # Ğ Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ¾ĞºĞ°Ğ¼
        subjects = [s.strip() for s in message.text.split('\n') if s.strip()]
        # subjects = ['Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº', 'ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°', 'Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°']
        
        if not subjects:
            bot.send_message(user_id, "âŒ ĞĞµÑ‚ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²!")
            return
        
        # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° Ğ¸Ğ· Ğ‘Ğ”
        student = Student.objects.get(telegram_id=user_id)
        day = data['day']  # day = 1
        
        # Ğ’ĞĞ–ĞĞ: Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ¡Ğ¢ĞĞ ĞĞ• Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ´ĞµĞ½ÑŒ Ğ¸ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°
        # Ğ­Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ±Ñ‹Ğ»Ğ¾ Ğ´ÑƒĞ±Ğ»ĞµĞ¹
        deleted_count, _ = PersonalLesson.objects.filter(
            student=student, 
            day=day
        ).delete()
        print(f"Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾ {deleted_count} ÑÑ‚Ğ°Ñ€Ñ‹Ñ… ÑƒÑ€Ğ¾ĞºĞ¾Ğ²")
        
        # Ğ‘Ğ” Ğ”Ğ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ (ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ Ğ±Ñ‹Ğ»Ğ¸):
        # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        # â”‚ student_id â”‚ day  â”‚ number â”‚ subject        â”‚
        # â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        # â”‚ 1          â”‚ 1    â”‚ 1      â”‚ Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ â”‚
        # â”‚ 1          â”‚ 1    â”‚ 2      â”‚ Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ â”‚
        # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        # Ğ‘Ğ” ĞŸĞĞ¡Ğ›Ğ• ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ (Ğ¿ÑƒÑÑ‚Ğ¾):
        # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        # â”‚ student_id â”‚ day  â”‚ number â”‚ subject        â”‚
        # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        # Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞĞĞ’Ğ«Ğ• ÑƒÑ€Ğ¾ĞºĞ¸
        for i, subject in enumerate(subjects, start=1):
            # enumerate(subjects, start=1):
            # 0 â†’ i=1, subject='Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº'
            # 1 â†’ i=2, subject='ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°'
            # 2 â†’ i=3, subject='Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°'
            
            lesson = PersonalLesson.objects.create(
                student=student,
                day=day,
                number=i,
                subject=subject
            )
            
            print(f"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ ÑƒÑ€Ğ¾Ğº: {student.name} - Ğ”ĞµĞ½ÑŒ {day} - Ğ£Ñ€Ğ¾Ğº {i} - {subject}")
        
        # Ğ‘Ğ” ĞŸĞĞ¡Ğ›Ğ• ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ:
        # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        # â”‚ student_id â”‚ day  â”‚ number â”‚ subject        â”‚
        # â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        # â”‚ 1          â”‚ 1    â”‚ 1      â”‚ Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº   â”‚
        # â”‚ 1          â”‚ 1    â”‚ 2      â”‚ ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°     â”‚
        # â”‚ 1          â”‚ 1    â”‚ 3      â”‚ Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°     â”‚
        # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        # Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ
        days_full = {1: "ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº", 2: "Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº", 3: "Ğ¡Ñ€ĞµĞ´Ğ°", 4: "Ğ§ĞµÑ‚Ğ²ĞµÑ€Ğ³", 5: "ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ°"}
        
        confirmation = f"âœ… *Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾!*\n\n"
        confirmation += f"ğŸ“… {days_full[day]}\n"
        confirmation += f"ğŸ“š Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾: {len(subjects)} ÑƒÑ€Ğ¾ĞºĞ¾Ğ²\n\n"
        
        for i, subject in enumerate(subjects, start=1):
            start_time, end_time = get_lesson_time(i)
            confirmation += f"{i}. {subject} ({start_time}-{end_time})\n"
        
        confirmation += "\nğŸ’¡ ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸ÑÑŒ Ğ½Ğ° Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…!"
        
        bot.send_message(
            user_id,
            confirmation,
            parse_mode='Markdown',
            reply_markup=get_main_keyboard()
        )
        
        # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¾Ğ½Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ñ‹)
        del temp_data[user_id]
        
        # temp_data Ñ‚ĞµĞ¿ĞµÑ€ÑŒ:
        # temp_data = {}  (Ğ¿ÑƒÑÑ‚Ğ¾)

# Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞĞ° ÑĞºÑ€Ğ°Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ âœ… Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾!              â”‚
# â”‚                                            â”‚
# â”‚ ğŸ“… ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº                             â”‚
# â”‚ ğŸ“š Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾: 3 ÑƒÑ€Ğ¾ĞºĞ¾Ğ²                     â”‚
# â”‚                                            â”‚
# â”‚ 1. Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº (08:00-08:40)             â”‚
# â”‚ 2. ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ° (08:50-09:30)               â”‚
# â”‚ 3. Ğ›Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° (09:50-10:30)                â”‚
# â”‚                                            â”‚
# â”‚ ğŸ’¡ ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸ÑÑŒ Ğ½Ğ° Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…!    â”‚
# â”‚                                            â”‚
# â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
# â”‚ â”‚ ğŸ“… Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ   â”‚ ğŸ“† Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°    â”‚           â”‚
# â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
# â”‚ ... (Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¼ĞµĞ½Ñ)                â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 3: ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ

```python
# Ğ¤ĞĞĞĞ’Ğ«Ğ™ ĞŸĞĞ¢ĞĞš - reminder_checker()
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ’Ñ€ĞµĞ¼Ñ: 09:39:50 (9:39 Ğ¸ 50 ÑĞµĞºÑƒĞ½Ğ´)
# Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ: 09:40:00

# Ğ¦Ğ˜ĞšĞ› 1: 09:39:50
now = datetime.now(MSK_TZ)  # 09:39:50
today_num = now.isoweekday()  # 3 (ÑÑ€ĞµĞ´Ğ°)

if today_num <= 5:  # True âœ…
    students = Student.objects.all()
    
    for student in students:
        lessons, _ = get_student_lessons(student, 3)
        
        for lesson in lessons:  # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞšĞĞ–Ğ”Ğ«Ğ™ ÑƒÑ€Ğ¾Ğº
            start_time_str = "09:50"
            start_time = datetime.strptime("09:50", "%H:%M").time()
            
            reminder_datetime = datetime.combine(datetime.today(), start_time) - timedelta(minutes=10)
            reminder_time = reminder_datetime.time()  # 09:40
            
            current_time = now.time()  # 09:39:50
            
            if (current_time.hour == reminder_time.hour and 
                current_time.minute == reminder_time.minute):
                # 09.hour (9) == 09.hour (9) â†’ True
                # 39.minute (39) == 40.minute (40) â†’ False
                # True AND False â†’ False âŒ
                # ĞĞµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼
                pass

time.sleep(30)  # Ğ–Ğ´Ñ‘Ğ¼ 30 ÑĞµĞºÑƒĞ½Ğ´

# Ğ¦Ğ˜ĞšĞ› 2: 09:40:20 (9:40 Ğ¸ 20 ÑĞµĞºÑƒĞ½Ğ´)
now = datetime.now(MSK_TZ)  # 09:40:20
today_num = now.isoweekday()  # 3

if today_num <= 5:  # True âœ…
    students = Student.objects.all()
    
    for student in students:
        lessons, _ = get_student_lessons(student, 3)
        
        for lesson in lessons:
            start_time_str = "09:50"
            reminder_time = (datetime.combine(datetime.today(), datetime.strptime("09:50", "%H:%M").time()) - timedelta(minutes=10)).time()
            # reminder_time = 09:40
            
            current_time = now.time()  # 09:40:20
            
            if (current_time.hour == reminder_time.hour and 
                current_time.minute == reminder_time.minute):
                # 09.hour (9) == 09.hour (9) â†’ True
                # 40.minute (40) == 40.minute (40) â†’ True âœ…
                # True AND True â†’ True âœ…
                # ĞĞ¢ĞŸĞ ĞĞ’Ğ›Ğ¯Ğ•Ğœ ĞĞĞŸĞĞœĞ˜ĞĞĞĞ˜Ğ•!
                
                text = (
                    f"âš ï¸ *ĞĞĞŸĞĞœĞ˜ĞĞĞĞ˜Ğ•!*\n\n"
                    f"â° Ğ§ĞµÑ€ĞµĞ· *10 Ğ¼Ğ¸Ğ½ÑƒÑ‚* ÑƒÑ€Ğ¾Ğº:\n\n"
                    f"ğŸ“š *{lesson.number}. {lesson.subject}*\n"
                    f"ğŸ• ĞĞ°Ñ‡Ğ°Ğ»Ğ¾: {start_time_str}\n\n"
                    f"ğŸ’¼ ĞŸĞ¾Ñ€Ğ° ÑĞ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒÑÑ!"
                )
                
                bot.send_message(
                    student.telegram_id,  # ID ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ¾Ğ² Ğ² Telegram
                    text,
                    parse_mode='Markdown'
                )
                
                print(f"âœ… ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ: {student.name} - {lesson.subject}")

time.sleep(30)

# Ğ¦Ğ˜ĞšĞ› 3: 09:41:00 (9:41 Ğ¸ 0 ÑĞµĞºÑƒĞ½Ğ´)
now = datetime.now(MSK_TZ)  # 09:41:00
# ... Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾
# 09.hour (9) == 09.hour (9) â†’ True
# 41.minute (41) == 40.minute (40) â†’ False
# True AND False â†’ False âŒ
# ĞĞµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ (ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚)
```

---

## ğŸ”§ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 4: Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ ÑƒÑ€Ğ¾ĞºĞ¾Ğ² (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 234-247)

```python
# Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ¯ handle_today() - Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ÑƒÑ€Ğ¾ĞºĞ°

now = get_current_lesson_time().strftime("%H:%M")  # "10:45"

for lesson in lessons:
    start, end = get_lesson_time(lesson.number)
    # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: start="09:50", end="10:30"
    
    # Ğ¡Ğ ĞĞ’ĞĞ•ĞĞ˜Ğ• Ğ¡Ğ¢Ğ ĞĞš (Ğ»ĞµĞºÑĞ¸ĞºĞ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ)
    # Ğ’ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ "Ğ§Ğ§:ĞœĞœ" ÑÑ‚Ñ€Ğ¾ĞºĞ¸ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾!
    
    if start > now:
        # "09:50" > "10:45" â†’ False (09 < 10)
        status = " â³"
    elif end < now:
        # "10:30" < "10:45" â†’ True âœ…
        status = " âœ…"
    else:
        status = " ğŸ”´"
    
    # Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: status = " âœ…" (ÑƒÑ€Ğ¾Ğº ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ»)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ Ğ’Ğ¡Ğ•Ğ¥ ĞšĞĞœĞ‘Ğ˜ĞĞĞ¦Ğ˜Ğ™
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ£Ñ€Ğ¾Ğº: 09:50-10:30

# Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 1: now = "09:00" (ÑƒÑ€Ğ¾Ğº ĞµÑ‰Ñ‘ Ğ½Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑÑ)
# â”œâ”€ start ("09:50") > now ("09:00") â†’ True
# â”œâ”€ status = " â³"
# â””â”€ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ: "1. ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ° â³"

# Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 2: now = "10:00" (ÑƒÑ€Ğ¾Ğº Ğ¸Ğ´Ñ‘Ñ‚)
# â”œâ”€ start ("09:50") > now ("10:00") â†’ False
# â”œâ”€ end ("10:30") < now ("10:00") â†’ False
# â”œâ”€ else: status = " ğŸ”´"
# â””â”€ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ: "1. ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ° ğŸ”´"

# Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 3: now = "11:00" (ÑƒÑ€Ğ¾Ğº Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»ÑÑ)
# â”œâ”€ start ("09:50") > now ("11:00") â†’ False
# â”œâ”€ end ("10:30") < now ("11:00") â†’ True
# â”œâ”€ status = " âœ…"
# â””â”€ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ: "1. ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ° âœ…"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞŸĞĞ§Ğ•ĞœĞ£ Ğ¡Ğ ĞĞ’ĞĞ•ĞĞ˜Ğ• Ğ¡Ğ¢Ğ ĞĞš Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢?
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ "Ğ§Ğ§:ĞœĞœ" ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾:

# "09:50" vs "10:45"
# â†“
# Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»: '0' vs '1'
# '0' < '1' â†’ "09:50" < "10:45" âœ…

# "10:30" vs "10:45"
# â†“
# '1' == '1' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# '0' == '0' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# ':' == ':' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# '3' < '4' â†’ "10:30" < "10:45" âœ…

# "10:50" vs "10:45"
# â†“
# '1' == '1' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# '0' == '0' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# ':' == ':' â†’ ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
# '5' > '4' â†’ "10:50" > "10:45" âœ…
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 3: Ğ¢Ğ˜ĞŸĞ˜Ğ§ĞĞ«Ğ• ĞĞ¨Ğ˜Ğ‘ĞšĞ˜ Ğ˜ ĞšĞĞš Ğ˜Ğ¥ Ğ˜Ğ—Ğ‘Ğ•Ğ–ĞĞ¢Ğ¬

## âŒ ĞÑˆĞ¸Ğ±ĞºĞ° 1: Ğ—Ğ°Ğ±Ñ‹Ğ» `.save()` Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°

```python
# âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Ğ‘Ğ”
student = Student.objects.get(telegram_id=123456789)
student.grade = 10  # Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
student.letter = 'Ğ'  # Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
# Ğ‘Ğ” ĞĞ• ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ! âŒ

# âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ `.save()`
student = Student.objects.get(telegram_id=123456789)
student.grade = 10
student.letter = 'Ğ'
student.save()  # â† Ğ­Ñ‚Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ!
# Ğ‘Ğ” Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ° âœ…
```

---

## âŒ ĞÑˆĞ¸Ğ±ĞºĞ° 2: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ `get_or_create()`

```python
# âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
student = Student.objects.get_or_create(telegram_id=user_id)
# Ğ’ĞµÑ€Ğ½Ñ‘Ñ‚ ĞºĞ¾Ñ€Ñ‚ĞµĞ¶ (Student Ğ¾Ğ±ÑŠĞµĞºÑ‚, Ğ±ÑƒĞ»ĞµĞ²Ğ¾)!

# âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ñ€Ğ°ÑĞ¿Ğ°ĞºĞ¾Ğ²Ñ‹Ğ²Ğ°ĞµĞ¼ ĞºĞ¾Ñ€Ñ‚ĞµĞ¶
student, created = Student.objects.get_or_create(
    telegram_id=user_id,
    defaults={'name': name}
)
# Ğ¢ĞµĞ¿ĞµÑ€ÑŒ student - ÑÑ‚Ğ¾ Student Ğ¾Ğ±ÑŠĞµĞºÑ‚
# created - Ğ±ÑƒĞ»ĞµĞ²Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ (True ĞµÑĞ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ»Ğ¸, False ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸)
```

---

## âŒ ĞÑˆĞ¸Ğ±ĞºĞ° 3: Ğ—Ğ°Ğ±Ñ‹Ğ» Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ»Ğ¸ Ğ¾Ğ±ÑŠĞµĞºÑ‚

```python
# âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ DoesNotExist Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
def handle_callback(call):
    user_id = call.message.chat.id
    student = Student.objects.get(telegram_id=user_id)
    # Ğ•ÑĞ»Ğ¸ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ° Ğ½ĞµÑ‚ Ğ² Ğ‘Ğ” â†’ Student.DoesNotExist âŒ

# âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ try-except
def handle_callback(call):
    user_id = call.message.chat.id
    try:
        student = Student.objects.get(telegram_id=user_id)
    except Student.DoesNotExist:
        bot.send_message(user_id, "âŒ Ğ£Ñ‡ĞµĞ½Ğ¸Ğº Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½!")
        return
```

---

## âŒ ĞÑˆĞ¸Ğ±ĞºĞ° 4: Ğ‘ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ±ĞµĞ· Ğ¿Ğ°ÑƒĞ·Ñ‹ (Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸)

```python
# âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ñ€
def reminder_checker():
    while True:
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ½Ğ°Ğ½Ğ¾ÑĞµĞºÑƒĞ½Ğ´Ñƒ!
        # CPU Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: 100% ğŸ˜±
        now = get_current_lesson_time()
        ...

# âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ğ°ÑƒĞ·Ñƒ
def reminder_checker():
    while True:
        now = get_current_lesson_time()
        ...
        time.sleep(30)  # â† ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ!
        # Ğ¢ĞµĞ¿ĞµÑ€ÑŒ CPU Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ~0% ğŸ˜Š
```

---

## âŒ ĞÑˆĞ¸Ğ±ĞºĞ° 5: Ğ—Ğ°Ğ±Ñ‹Ğ» ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

```python
# âŒ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - temp_data Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾
@bot.message_handler(func=lambda message: message.chat.id in temp_data)
def handle_add_personal(message):
    user_id = message.chat.id
    # ... Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ...
    # Ğ—Ğ°Ğ±Ñ‹Ğ» del temp_data[user_id]
    # temp_data Ğ±ÑƒĞ´ĞµÑ‚ Ğ½Ğ°ĞºĞ°Ğ¿Ğ»Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼Ñ‘Ñ€Ñ‚Ğ²Ñ‹Ñ… ÑĞµÑÑĞ¸Ğ¹!

# âœ… ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ - Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ĞµĞ¼ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ
@bot.message_handler(func=lambda message: message.chat.id in temp_data)
def handle_add_personal(message):
    user_id = message.chat.id
    # ... Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ...
    del temp_data[user_id]  # â† ĞÑ‡Ğ¸Ñ‰Ğ°ĞµĞ¼ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ!
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 4: ĞšĞĞš ĞŸĞ ĞĞ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞ¢Ğ¬ ĞšĞĞ” Ğ›ĞĞšĞĞ›Ğ¬ĞĞ

## ğŸ§ª Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°

```python
# test_bot.py
# Ğ­Ñ‚Ğ¾ ĞĞ• Ñ‡Ğ°ÑÑ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

import os
import django

# Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()

from bot.models import Student, GlobalLesson, PersonalLesson
from bot.telegram_bot import (
    get_lesson_time,
    get_student_lessons,
    get_next_lesson,
    normalize_letter
)
from datetime import datetime, timedelta
import pytz

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢Ğ•Ğ¡Ğ¢ 1: get_lesson_time()
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def test_get_lesson_time():
    print("\n[TEST] get_lesson_time()")
    
    # Ğ¢ĞµÑÑ‚ 1a: ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ ÑƒÑ€Ğ¾ĞºĞ°
    start, end = get_lesson_time(1)
    assert start == "08:00" and end == "08:40", "Ğ£Ñ€Ğ¾Ğº 1 Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹!"
    print("âœ… Ğ£Ñ€Ğ¾Ğº 1: 08:00-08:40")
    
    # Ğ¢ĞµÑÑ‚ 1b: ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ÑƒÑ€Ğ¾Ğº
    start, end = get_lesson_time(8)
    assert start == "14:10" and end == "14:50", "Ğ£Ñ€Ğ¾Ğº 8 Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹!"
    print("âœ… Ğ£Ñ€Ğ¾Ğº 8: 14:10-14:50")
    
    # Ğ¢ĞµÑÑ‚ 1c: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€
    start, end = get_lesson_time(9)
    assert start == "??:??" and end == "??:??", "Ğ”Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ??:??"
    print("âœ… Ğ£Ñ€Ğ¾Ğº 9: ??:?? (Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹)")
    
    print("âœ… Ğ¢ĞµÑÑ‚ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½!\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢Ğ•Ğ¡Ğ¢ 2: normalize_letter()
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def test_normalize_letter():
    print("\n[TEST] normalize_letter()")
    
    # Ğ¢ĞµÑÑ‚ 2a: ĞœĞ°Ğ»Ğ°Ñ Ğ±ÑƒĞºĞ²Ğ°
    assert normalize_letter("Ğ°") == "Ğ"
    print("âœ… 'Ğ°' â†’ 'Ğ'")
    
    # Ğ¢ĞµÑÑ‚ 2b: Ğ£Ğ¶Ğµ Ğ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ
    assert normalize_letter("Ğ‘") == "Ğ‘"
    print("âœ… 'Ğ‘' â†’ 'Ğ‘'")
    
    # Ğ¢ĞµÑÑ‚ 2c: Ğ¡ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°Ğ¼Ğ¸
    assert normalize_letter(" Ğ² ") == "Ğ’"
    print("âœ… ' Ğ² ' â†’ 'Ğ’'")
    
    # Ğ¢ĞµÑÑ‚ 2d: ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ±ÑƒĞºĞ²Ğ°
    assert normalize_letter("Ñ…") is None
    print("âœ… 'Ñ…' â†’ None")
    
    # Ğ¢ĞµÑÑ‚ 2e: ĞŸÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°
    assert normalize_letter("") is None
    print("âœ… '' â†’ None")
    
    print("âœ… Ğ¢ĞµÑÑ‚ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½!\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢Ğ•Ğ¡Ğ¢ 3: Ğ‘Ğ” Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def test_database_operations():
    print("\n[TEST] ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ‘Ğ”")
    
    # Ğ¢ĞµÑÑ‚ 3a: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°
    student, created = Student.objects.get_or_create(
        telegram_id=999999999,
        defaults={'name': 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ‡ĞµĞ½Ğ¸Ğº'}
    )
    
    if created:
        print(f"âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ‡ĞµĞ½Ğ¸Ğº: {student}")
    else:
        print(f"â„¹ï¸ Ğ£Ñ‡ĞµĞ½Ğ¸Ğº ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚: {student}")
    
    # Ğ¢ĞµÑÑ‚ 3b: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
    student.grade = 10
    student.letter = 'Ğ'
    student.save()
    print(f"âœ… Ğ£Ñ‡ĞµĞ½Ğ¸Ğº Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½: {student}")
    
    # Ğ¢ĞµÑÑ‚ 3c: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
    lessons, lesson_type = get_student_lessons(student, 1)  # ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº
    print(f"âœ… Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: {lesson_type}, ÑƒÑ€Ğ¾ĞºĞ¾Ğ²: {len(lessons)}")
    for lesson in lessons:
        start, end = get_lesson_time(lesson.number)
        print(f"  - {lesson.number}. {lesson.subject} ({start}-{end})")
    
    # Ğ¢ĞµÑÑ‚ 3d: ĞŸĞ¾Ğ¸ÑĞº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ ÑƒÑ€Ğ¾ĞºĞ°
    MSK_TZ = pytz.timezone('Europe/Moscow')
    now = datetime.now(MSK_TZ)
    next_lesson, next_time = get_next_lesson(student, now)
    if next_lesson:
        print(f"âœ… Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑƒÑ€Ğ¾Ğº: {next_lesson.subject} Ğ² {next_time}")
    else:
        print(f"â„¹ï¸ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ ÑƒÑ€Ğ¾ĞºĞ° Ğ½ĞµÑ‚")
    
    # Cleanup: ÑƒĞ´Ğ°Ğ»ÑĞµĞ¼ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑƒÑ‡ĞµĞ½Ğ¸ĞºĞ°
    student.delete()
    print("âœ… Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ‡ĞµĞ½Ğ¸Ğº ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ’Ğ¡Ğ•Ğ¥ Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if __name__ == '__main__':
    print("\n" + "="*60)
    print("ğŸ§ª Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’")
    print("="*60)
    
    try:
        test_get_lesson_time()
        test_normalize_letter()
        test_database_operations()
        
        print("="*60)
        print("âœ… Ğ’Ğ¡Ğ• Ğ¢Ğ•Ğ¡Ğ¢Ğ« ĞŸĞ ĞĞ™Ğ”Ğ•ĞĞ«!")
        print("="*60 + "\n")
    
    except AssertionError as e:
        print(f"\nâŒ Ğ¢Ğ•Ğ¡Ğ¢ ĞĞ• ĞŸĞ ĞĞ™Ğ”Ğ•Ğ: {e}\n")
    except Exception as e:
        print(f"\nâŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ: {e}\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞšĞĞš Ğ—ĞĞŸĞ£Ğ¡Ğ¢Ğ˜Ğ¢Ğ¬:
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# python test_bot.py
```

---

# Ğ§ĞĞ¡Ğ¢Ğ¬ 5: Ğ¡ĞĞ’Ğ•Ğ¢Ğ« ĞŸĞ ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ˜

## ğŸš€ Ğ¡Ğ¾Ğ²ĞµÑ‚ 1: ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

```python
# âŒ ĞĞ•ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ² Ğ‘Ğ”
for i in range(100):
    student = Student.objects.get(telegram_id=123456789)
    # ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ· Ñ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ² Ğ‘Ğ”! 100 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²!

# âœ… ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·
student = Student.objects.get(telegram_id=123456789)
for i in range(100):
    # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ, Ğ‘Ğ” Ğ½Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ
    print(student.name)
```

---

## ğŸš€ Ğ¡Ğ¾Ğ²ĞµÑ‚ 2: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ `select_related()` Ğ´Ğ»Ñ ÑĞ²ÑĞ·ĞµĞ¹

```python
# âŒ ĞĞ•ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - N+1 Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°
students = Student.objects.all()
for student in students:
    # Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¸Ğ´Ñ‘Ğ¼ Ğ² Ğ‘Ğ”!
    lessons = PersonalLesson.objects.filter(student=student)

# âœ… ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ²ÑÑ‘ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ
from django.db.models import Prefetch

students = Student.objects.prefetch_related('personal_lessons')
for student in students:
    # personal_lessons ÑƒĞ¶Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
    lessons = student.personal_lessons.all()
```

---

## ğŸš€ Ğ¡Ğ¾Ğ²ĞµÑ‚ 3: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ `filter()` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ°

```python
# âŒ ĞĞ•ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - Ñ†Ğ¸ĞºĞ» Ğ² Python
all_lessons = PersonalLesson.objects.all()
result = []
for lesson in all_lessons:
    if lesson.day == 1 and lesson.number == 1:
        result.append(lesson)

# âœ… ĞĞŸĞ¢Ğ˜ĞœĞĞ›Ğ¬ĞĞ - Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Ğ‘Ğ”
result = PersonalLesson.objects.filter(day=1, number=1)
# Ğ‘Ğ” Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ, Ğ¼ĞµĞ½ÑŒÑˆĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ÑÑ
```

---

## ğŸš€ Ğ¡Ğ¾Ğ²ĞµÑ‚ 4: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²

```python
# Ğ’Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ĞšĞĞ–Ğ”Ğ£Ğ® ÑĞµĞºÑƒĞ½Ğ´Ñƒ Ğ½Ğ° Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ "ÑĞµĞ¹Ñ‡Ğ°Ñ 6:30?"
# ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ»ĞµĞµ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´

import schedule
import time

def morning_sender_optimized():
    # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ schedule Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡
    schedule.every().day.at("06:30").do(send_morning_schedule)
    
    while True:
        schedule.run_pending()
        time.sleep(60)

# Ğ­Ñ‚Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ² Ğ´ĞµĞ½ÑŒ Ğ² 6:30
# Ğ’Ğ¼ĞµÑÑ‚Ğ¾ 1440 Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº (ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ½Ñ)
```

---

# Ğ—ĞĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•

ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑÑ! ğŸ‰ Ğ’Ñ‹ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¸ Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ¼Ñƒ ĞºĞ¾Ğ´Ñƒ "Ğ´Ğ¾ Ğ°Ñ‚Ğ¾Ğ¼Ğ¾Ğ²" Ğ¸ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚Ğµ:

âœ… **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ** - ĞºĞ°Ğº Ğ²ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ²Ğ¼ĞµÑÑ‚Ğµ
âœ… **Ğ›Ğ¾Ğ³Ğ¸ĞºÑƒ** - ĞºĞ°Ğº Ğ±Ğ¾Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
âœ… **Ğ‘Ğ”** - ĞºĞ°Ğº Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
âœ… **ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸** - ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
âœ… **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹** - ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

**Ğ”Ğ°Ğ»ÑŒÑˆĞµ Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ:**
- ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ° Ğ¿Ğ¾Ğ´ ÑĞ²Ğ¾Ğ¸ Ğ½ÑƒĞ¶Ğ´Ñ‹
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ±Ğ¾Ñ‚Ğ¾Ğ² Ñ Ğ½ÑƒĞ»Ñ

**ĞŸĞ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ:**
- ĞšĞ¾Ğ´ - ÑÑ‚Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¼Ñ‹ÑĞ»ĞµĞ¹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ»ÑĞ´ÑŒĞ¼Ğ¸
- Ğ§Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ, Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ, ÑĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ, Ğ¾ÑˆĞ¸Ğ±Ğ°Ğ¹Ñ‚ĞµÑÑŒ
- ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° - ÑÑ‚Ğ¾ ÑˆĞ°Ğ³ Ğ½Ğ° Ğ¿ÑƒÑ‚Ğ¸ Ğº Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ñƒ

**Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸!** ğŸ’ªğŸ“šğŸš€
